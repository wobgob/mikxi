---

- name: Common configuration
  hosts: mikxi
  vars:
    sudoers:
      - azerothcore
      - winzig
  user: deploy
  become: yes
  gather_facts: yes
  roles:
    - common
  tags: ['common']

- name: Database configuration
  hosts: mikxi
  vars:
    mysql_pass: "{{ lookup('env', 'MYSQL_PASS') }}"
  user: deploy
  become: yes
  gather_facts: yes
  roles:
    - database
  tags: ['database']

- name: AzerothCore configuration
  hosts: mikxi
  vars:
    mysql_pass: "{{ lookup('env', 'MYSQL_PASS') }}"
  user: azerothcore
  become: yes
  gather_facts: yes
  roles:
    - azerothcore
  tags: ['azerothcore']

- name: Winzig configuration
  hosts: mikxi
  vars:
    discord_bot_token: "{{ lookup('env', 'DISCORD_BOT_TOKEN') }}"
    discord_client_id: "{{ lookup('env', 'DISCORD_CLIENT_ID') }}"
    discord_guild_id: "{{ lookup('env', 'DISCORD_GUILD_ID') }}"
    mysql_pass: "{{ lookup('env', 'MYSQL_PASS') }}"
  user: winzig
  become: yes
  gather_facts: yes
  roles:
    - winzig
  tags: ['winzig']